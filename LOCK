getgenv().lock = false;
local camera = game.Workspace.Camera
local user = nil
local VICTIM = nil

local function getFullUser(input)
    user = nil
    local MATCHES = {}
    local PLAYERS = game.Workspace:GetChildren()
    local LEN = #input
    if input == "" or input == " " then user = nil return end
    for _, PLAYER in ipairs(PLAYERS) do
        local PLR = PLAYER.Name:lower()
        local INP = input:lower()
        if string.sub(PLR,1,#INP) == INP and PLAYER:FindFirstChild("Humanoid") then
            table.insert(MATCHES, PLAYER.Name)
        end
    end
    if #MATCHES > 0 then
        user = MATCHES[1]
        return user
    else
       user = nil
        return user
    end
end

local function startLock(loser)
    spawn(function()
        while wait() do
            if lock then
                VICTIM = loser
                target = game.Workspace[VICTIM]
                local TargetVelocity = Vector3.new(target.UpperTorso.Velocity.X * 0.34204, 0, target.UpperTorso.Velocity.Z * 0.34204)
                if target and not target:GetAttribute("Knocked") and game.Players[target.Name] then
              				    if target.UpperTorso then
                  				    camera.CFrame = CFrame.new(camera.CFrame.Position, target.UpperTorso.Position + TargetVelocity)
              				    end
                end
            end
            if VICTIM == nil then break end 
        end
    end)
end

game.Workspace.ChildAdded:Connect(function(new)
    if new.Name == user then
        startLock(user)
    end
end)

local function LockNotif()
    if user then
        game.StarterGui:SetCore("SendNotification", {
            Title = "Lock Notification",
            Text = "Locked On: "..tostring(user),
            Icon = "",
            Duration = 0.7
        })
    end
end

local function UnLockNotif()
    game.StarterGui:SetCore("SendNotification", {
        Title = "Lock Notification",
        Text = "Unlocked...",
        Icon = "",
        Duration = 0.7
    })
end

if game.CoreGui:FindFirstChild("DrRay") then
    game.CoreGui:FindFirstChild("DrRay"):Destroy()
    if game.CoreGui:FindFirstChild("ButtonHandler") then
        game.CoreGui:FindFirstChild("ButtonHandler"):Destroy()
    end
end

local lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/AZYsGithub/DrRay-UI-Library/main/DrRay.lua"))()
local window = lib:Load("Made By Tariq", "Default")
local tab = lib.newTab("Main", "")
local tab2 = lib.newTab("Player", "")

tab.newInput("Username", "Username to lock on.", function(inp)
    getFullUser(inp)
end)
tab.newToggle("Lock On User", "Starts the lock.", false, function(bool)
    if not bool then
        UnLockNotif()
        VICTIM = nil
    end
    if bool then
        LockNotif()
    end
    lock = bool
    startLock(user)
end)

tab2.newButton("Lock Button", "Creates a new lock button.", function()
    local btnGui = Instance.new("ScreenGui")
    local btn = Instance.new("TextButton")
    btnGui.Name = "ButtonHandler"
    btnGui.Parent = game.CoreGui
    btnGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    btn.Name = "LButton"
    btn.Parent = btnGui
    btn.BackgroundColor3 = Color3.fromRGB(3,40,53)
    btn.BorderSizePixel = 0
    btn.Position = UDim2.new(0, 737, 0, 35)
    btn.Size = UDim2.new(0, 100, 0, 50)
    btn.Font = Enum.Font.GothamBlack
    btn.Text = "Lock"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextSize = 18
    
    btn.MouseButton1Click:Connect(function()
        if lock then
            lock = false
        elseif not lock then
            lock = true
        end
        if not lock then
            UnLockNotif()
            VICTIM = nil
        end
        if lock then
            LockNotif()
        end
        startLock(user)
    end)
end)
tab2.newButton("Silent Lock", "Locks on the closest person. (GLITCHY)", function()
    local silentBtn = Instance.new("TextButton")
    silentBtn.Name = "SilentButton"
    silentBtn.Parent = game.CoreGui:FindFirstChild("ButtonHandler")
    silentBtn.BackgroundColor3 = Color3.fromRGB(3,40,53)
    silentBtn.BorderSizePixel = 0
    silentBtn.BackgroundTransparency = 0.1
    silentBtn.Position = UDim2.new(0, 630, 0, -15)
    silentBtn.Size = UDim2.new(0, 100, 0, 50)
    silentBtn.Font = Enum.Font.GothamBlack
    silentBtn.Text = "Silent Lock"
    silentBtn.TextColor3 = Color3.new(1,1,1)
    silentBtn.TextSize = 16
    silentBtn.TextTransparency = 0.132
    
    silentBtn.MouseButton1Click:Connect(function()
        if not silent then
            silent = true
        elseif silent then
            silent = false
        end
        if not silent then
            UnlockNotif()
            silentVic = nil
        end
        if silent then
            LockNotif()
        end
        silentLock()
    end)
end)
tab2.newButton("Destroy Lock Buttons", "Destroys all buttons created by this script.", function()
    if game.CoreGui:FindFirstChild("ButtonHandler") then
        game.CoreGui:FindFirstChild("ButtonHandler"):Destroy()
    end
end)
tab2.newButton("Kick", "", function()
    local LP = game.Players.LocalPlayer
    if LP then
        LP:Kick("Did you get the last stomp?")
    end
end)