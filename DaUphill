getgenv().AutoHighArm = false;
getgenv().lock = false;
getgenv().AutoInfHealth = false;
getgenv().autoRst = false;
getgenv().stomp = false;
local camera = game.Workspace.Camera
local user = nil
local TS = game.TweenService
local tweeninfo = TweenInfo.new(0.1)
local RS = game:GetService("RunService")
local VICTIM = nil

local function getFullUser(input)
    local MATCHES = {}
    local PLAYERS = game.Workspace:GetChildren()
    local LEN = #input
    if input == "" or input == " " then user = nil return end
    for _, PLAYER in ipairs(PLAYERS) do
        local PLR = PLAYER.Name:lower()
        local INP = input:lower()
        if string.sub(PLR,1,#INP) == INP and PLAYER:FindFirstChild("Humanoid") then
            table.insert(MATCHES, PLAYER)
        end
    end
    if #MATCHES > 0 then
        user = MATCHES[1]
        return user
    else
       user = nil
        return user
    end
end

local function InfHealth()
    spawn(function()
        while wait() do
            local PlrName = game.Players.LocalPlayer.Name
            if AutoInfHealth then
                if game.Workspace:FindFirstChild(PlrName).Humanoid then
                    game.Workspace:FindFirstChild(PlrName).Head:Remove()
                end
            end
        end
    end)
end 

local function autoReset()
    spawn(function()
        while wait() do
            if autoRst then
                local LP = game.Players.LocalPlayer.Name
                local WLP = game.Workspace[LP]
                local HRT = WLP.HumanoidRootPart
                if WLP.Humanoid.Health <= 5 then
                    local oldPOS = HRT.CFrame.Position
                    HRT.Size = Vector3.new(1,2,0.5)
                    HRT.CFrame = CFrame.new(99999, 99999, 99999)
                    WLP.Humanoid.Health = 0
                    wait(4.5)
                    HRT.CFrame = CFrame.new(oldPOS)
                end
            end
        end
    end)
end

local function LockNotif()
    if user then
        game.StarterGui:SetCore("SendNotification", {
            Title = "Lock Notification",
            Text = "Locked On: "..tostring(user.Name),
            Icon = "",
            Duration = 0.7
        })
    end
end

local function UnLockNotif()
    game.StarterGui:SetCore("SendNotification", {
        Title = "Lock Notification",
        Text = "Unlocked...",
        Icon = "",
        Duration = 0.7
    })
end

local function startLock()
    spawn(function()
        while wait() do
            if lock then
                local target = user
                local NAME = target.Name
                if target and not target:GetAttribute("Knocked") and game.Players[NAME] then
              				    if target.LowerTorso then
              				        local tween = TS:Create(camera, tweeninfo, { CFrame = CFrame.new(camera.CFrame.Position, target.UpperTorso.Position + target.UpperTorso.Velocity * 0.36204) })
                  				    tween:Play()
              				        if target:GetAttribute("Knocked") then
              				            tween:Cancel()
              				        end
              				    end
                end
            end
        end
    end)
end

local function autoBuyArmour()
    spawn(function()
        while wait() do
            if AutoHighArm then
                local me = game.Players.LocalPlayer.Name
                fireclickdetector(game.workspace.MAP.Ignored.BuyPads["[High-Medium Armor]"].ClickDetector)
                wait()
                game.Workspace[me]:SetAttribute("PurchaseCooldown", false)
            end
        end
    end)
end

spawn(function()
    if lock and user then
        RS.RenderStepped:Connect(startLock)
    end
end)

local function autoStomp()
    spawn(function()
        while wait() do
            if stomp then
                game:GetService("ReplicatedStorage"):WaitForChild("MAINEVENT"):FireServer("STOMP")
            end
        end
    end)
end

local lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/AZYsGithub/DrRay-UI-Library/main/DrRay.lua"))()
local window = lib:Load("Made By Tariq", "Default")
local tab = lib.newTab("Main", "Image Id here")

tab.newToggle("Auto Buy High-Medium Armour", "", false, function(bool)
    AutoHighArm = bool
    autoBuyArmour()
end)
tab.newToggle("Auto Stomp", "", false, function(bool)
    stomp = bool
    autoStomp()
end)
tab.newToggle("Auto Max Health", "", false, function(bool)
    AutoInfHealth = bool
    InfHealth()
end)
tab.newToggle("Auto Reset", "Auto resets when health is below/equal to 5.", false, function(bool)
    autoRst = bool
    autoReset()
end)
tab.newInput("Username", "Username to lock on.", function(inp)
    getFullUser(inp)
end)
tab.newToggle("Lock On User", "Starts the lock.", false, function(bool)
    if not bool then
        UnLockNotif()
    end
    if bool then
        LockNotif()
    end
    lock = bool
    startLock()
    print(user)
end)